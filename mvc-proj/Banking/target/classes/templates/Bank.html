<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<script>

    function depositValue(){
        var amount = document.getElementById("amount").value;
        // var custid = "11";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange=function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }else{
                document.getElementById("demo").innerHTML = "Error updating";
            }
        };
        xhttp.open("GET", "/user/deposit?amount="+amount, true);
        xhttp.send();
    }

    function withdrawValue(){
        var amount = document.getElementById("amount").value;
        var custid = "11";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange=function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("demo").innerHTML = this.responseText;
            }else{
                document.getElementById("demo").innerHTML = "Error updating";
            }
        };
        xhttp.open("GET", "/user/withdraw?amount="+amount, true);
        xhttp.send();
    }
    function logout(){
        location.replace("/logout")
    }

    function check(){
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange=function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("test").innerHTML = this.responseText;
            }else{
                document.getElementById("test").innerHTML = "Error getting balance";
            }
        };
        xhttp.open("GET", "/user/checkbalance", true);
        xhttp.send();
    }
</script>


<body>
    Welcome your username is " [[${#httpServletRequest.remoteUser}]] ",you are now logged in<br><br>
</body>
<p id="test"></p>
<form  method ="post">
<!--    <div><label>Customer UserName : <input type="text"  id="custid"></label></div>-->
    <button type="button" onclick="check()">Check Balance</button>
    <br>
    <div><label>Amount :  <input type="text" placeholder="Enter amount here" id="amount"> </label></div>
    <button type="button" onclick="depositValue()">Deposit</button>
    <button type="button" onclick="withdrawValue()">Withdraw</button>
    <br><br>
    <button type="button" onclick="logout()">Signout</button>
</form>
<br>
<p id="demo"></p>
</html>